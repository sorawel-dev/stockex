<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- Vue formulaire des cat√©gories avec code et comptes comptables -->
    <record id="product_category_form_view_inherit" model="ir.ui.view">
        <field name="name">product.category.form.inherit.stockex</field>
        <field name="model">product.category</field>
        <field name="inherit_id" ref="product.product_category_form_view"/>
        <field name="arch" type="xml">
            <field name="name" position="after">
                <field name="code" placeholder="ex: ALIM, ELEC, FOUR..." 
                       help="Code court pour identifier la cat√©gorie"/>
            </field>
            <field name="parent_id" position="after">
                <field name="accounts_configured" 
                       widget="boolean" 
                       readonly="1"
                       string="‚úì Comptes Comptables Configur√©s"/>
            </field>
            
            <!-- Ajouter section Comptes Comptables apr√®s le champ parent_id -->
            <field name="parent_id" position="after">
                <group name="stockex_account_stock" string="üìä Comptes Comptables de Stock (OHADA)" colspan="4">
                    <group>
                        <field name="property_cost_method" 
                               string="M√©thode de Co√ªt"
                               help="M√©thode de valorisation des stocks"/>
                        <field name="property_valuation" 
                               string="Valorisation des Stocks"
                               help="Manuelle ou Automatique (temps r√©el)"/>
                    </group>
                    <group>
                        <field name="property_stock_valuation_account_id" 
                               string="Compte de Valorisation (31)"
                               help="Compte OHADA pour la valorisation des stocks (ex: 31 - Marchandises)"
                               options="{'no_create': True}"
                               domain="[('deprecated', '=', False)]"/>
                        <field name="property_stock_account_input_categ_id" 
                               string="Compte Variation Entr√©e (603)"
                               help="Compte OHADA pour les variations de stocks - Entr√©es (ex: 603 - Variation de stocks)"
                               options="{'no_create': True}"
                               domain="[('deprecated', '=', False)]"/>
                        <field name="property_stock_account_output_categ_id" 
                               string="Compte Variation Sortie (603)"
                               help="Compte OHADA pour les variations de stocks - Sorties (ex: 603 - Variation de stocks)"
                               options="{'no_create': True}"
                               domain="[('deprecated', '=', False)]"/>
                    </group>
                    <group colspan="2">
                        <div class="alert alert-info" role="status" style="margin-bottom: 0;">
                            <strong>üí° Plan Comptable OHADA :</strong>
                            <ul class="mb-0">
                                <li><strong>Classe 3</strong> : Comptes de stocks (31 - Marchandises, 32 - Mati√®res premi√®res, etc.)</li>
                                <li><strong>Compte 603</strong> : Variation des stocks de biens achet√©s</li>
                                <li>Les comptes sont h√©rit√©s de la cat√©gorie parente si non d√©finis</li>
                            </ul>
                        </div>
                    </group>
                </group>
            </field>
        </field>
    </record>
    
    <!-- Vue liste des cat√©gories avec code -->
    <record id="product_category_list_view_inherit" model="ir.ui.view">
        <field name="name">product.category.list.inherit.stockex</field>
        <field name="model">product.category</field>
        <field name="inherit_id" ref="product.product_category_list_view"/>
        <field name="arch" type="xml">
            <field name="display_name" position="after">
                <field name="code" optional="show"/>
                <field name="accounts_configured" string="‚úì Comptes Config." 
                       widget="boolean_toggle" 
                       optional="show"
                       readonly="1"/>
            </field>
        </field>
    </record>
    
</odoo>
