<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- Menu racine principal -->
    <menuitem id="menu_stockex_root"
              name="Gestion d'Inventaire"
              web_icon="stockex,static/description/icon.png"
              action="action_stockex_dashboard_home"
              sequence="45"
              groups="base.group_user"/>
    
    <!-- Sous-menu : Vue d'ensemble (page d'accueil) -->
    <menuitem id="menu_stockex_home"
              name="ðŸ  Vue d'Ensemble"
              parent="menu_stockex_root"
              action="action_stockex_dashboard_home"
              sequence="1"
              groups="base.group_user"/>
    
    <!-- Sous-menu : OpÃ©rations -->
    <menuitem id="menu_stockex_operations"
              name="âš™ï¸ OpÃ©rations"
              parent="menu_stockex_root"
              sequence="10"/>
    
    <menuitem id="menu_stockex_inventory"
              name="ðŸ“¦ Inventaires de Stock"
              parent="menu_stockex_operations"
              action="action_stockex_inventory"
              sequence="10"
              groups="base.group_user"/>
    
    <!-- Action Stock Initial (dÃ©finie ici pour Ã©viter les problÃ¨mes de rÃ©fÃ©rence) -->
    <record id="action_initial_stock_wizard_menu" model="ir.actions.act_window">
        <field name="name">Stock Initial</field>
        <field name="res_model">stockex.initial.stock.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
    
    <menuitem id="menu_initial_stock_wizard"
              name="ðŸ“¦ Stock Initial"
              parent="menu_stockex_operations"
              action="action_initial_stock_wizard_menu"
              sequence="20"
              groups="base.group_user"/>
    
    <menuitem id="menu_import_flexible_inventory"
              name="ðŸ“¥ Import Inventaire (Excel/CSV)"
              parent="menu_stockex_operations"
              action="action_import_flexible_inventory_wizard"
              sequence="30"
              groups="base.group_user"/>
    
    <!-- Sous-menu : Configuration -->
    <menuitem id="menu_stockex_config"
              name="âš™ï¸ Configuration"
              parent="menu_stockex_root"
              sequence="90"/>
    
    <!-- Menu ParamÃ¨tres -->
    <menuitem id="menu_stockex_settings"
              name="âš™ï¸ ParamÃ¨tres"
              parent="menu_stockex_config"
              action="action_stockex_config_settings"
              sequence="5"
              groups="stockex.group_stockex_manager"/>
    
    <!-- Menu vers les EntrepÃ´ts Odoo -->
    <menuitem id="menu_stockex_warehouses"
              name="ðŸ¢ EntrepÃ´ts"
              parent="menu_stockex_config"
              action="action_warehouse_stockex"
              sequence="10"
              groups="base.group_user"/>
    
    <!-- Menu vers les Emplacements Odoo -->
    <menuitem id="menu_stockex_locations"
              name="ðŸ“ Emplacements"
              parent="menu_stockex_config"
              action="stock.action_location_form"
              sequence="20"
              groups="base.group_user"/>
    
    <!-- Action pour les produits -->
    <menuitem id="menu_stockex_products"
              name="ðŸ“¦ Produits"
              parent="menu_stockex_config"
              action="product.product_normal_action_sell"
              sequence="30"
              groups="base.group_user"/>
    
    <!-- Menu CatÃ©gories de produits -->
    <menuitem id="menu_stockex_product_categories"
              name="ðŸ“‚ CatÃ©gories de Produits"
              parent="menu_stockex_config"
              action="product.product_category_action_form"
              sequence="35"
              groups="base.group_user"/>
    
    <!-- Configuration Kobo Collect -->
    <menuitem id="menu_stockex_kobo_config"
              name="ðŸ“± Kobo Collect"
              parent="menu_stockex_config"
              action="action_kobo_config"
              sequence="40"
              groups="base.group_user"/>
    
    <!-- Menu Corriger Types Produits (wizard) -->
    <menuitem id="menu_fix_product_types"
              name="ðŸ”§ Corriger Types Produits"
              parent="menu_stockex_config"
              action="action_fix_product_types_wizard"
              sequence="25"/>
    
    <!-- Menu Configurer Comptes OHADA (wizard) -->
    <menuitem id="menu_stock_accounts_config_wizard"
              name="âš™ï¸ Configurer Comptes OHADA"
              parent="menu_stockex_config"
              action="action_stock_accounts_config_wizard"
              sequence="26"
              groups="stockex.group_stockex_manager"/>
    
    <!-- SÃ©parateur -->
    <menuitem id="menu_stockex_config_separator"
              name="â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
              parent="menu_stockex_config"
              sequence="45"/>
    
    <!-- Action Guide Utilisateur -->
    <record id="action_user_guide" model="ir.actions.act_url">
        <field name="name">Guide Utilisateur</field>
        <field name="url">/stockex/static/description/guide_utilisateur.html</field>
        <field name="target">new</field>
    </record>
    
    <!-- Menu Guide Utilisateur -->
    <menuitem id="menu_stockex_user_guide"
              name="ðŸ“– Guide Utilisateur"
              parent="menu_stockex_config"
              action="action_user_guide"
              sequence="50"
              groups="base.group_user"/>
    
    <!-- Sous-menu : Dashboard -->

    

    

    

    
    <!-- Sous-menu : Analyse (utilise les menus natifs d'Odoo) -->
    <menuitem id="menu_stockex_reporting"
              name="ðŸ“ˆ Analyse"
              parent="menu_stockex_root"
              sequence="80"/>
    
    <!-- Menus Analyse -->
    <menuitem id="menu_stockex_stock_analysis"
              name="ðŸ“¦ Stock"
              parent="menu_stockex_reporting"
              action="stock.dashboard_open_quants"
              sequence="5"
              groups="stock.group_stock_user"/>
    
    <menuitem id="menu_stockex_moves_analysis"
              name="ðŸ“Š Analyse des mouvements"
              parent="menu_stockex_reporting"
              action="stock.stock_move_action"
              sequence="7"
              groups="stock.group_stock_user"/>
    
    <menuitem id="menu_stockex_inventory_report"
              name="ðŸ“‹ Liste des Inventaires"
              parent="menu_stockex_reporting"
              action="action_stockex_inventory"
              sequence="10"
              groups="base.group_user"/>
    
    <!-- SÃ©parateur -->
    <menuitem id="menu_stockex_reports_separator"
              name="â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
              parent="menu_stockex_reporting"
              sequence="50"/>
    
    <!-- Action hÃ©ritÃ©e pour Valorisation avec filtre quantitÃ© > 0 -->
    <record id="action_product_stock_view_filtered" model="ir.actions.act_window">
        <field name="name">Valorisation du stock</field>
        <field name="res_model">product.product</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('qty_available', '!=', 0)]</field>
        <field name="context">{
            'search_default_consumable': 1,
            'search_default_real_stock_available': 1,
        }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Aucun produit en stock
            </p>
        </field>
    </record>
    
    <!-- Menus natifs Odoo Stock -->
    <menuitem id="menu_stockex_stock_products"
              name="ðŸ’° Valorisation du stock"
              parent="menu_stockex_reporting"
              action="action_product_stock_view_filtered"
              sequence="65"
              groups="stock.group_stock_user"/>
    
</odoo>
