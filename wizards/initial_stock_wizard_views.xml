<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- Vue Formulaire pour Assistant Stock Initial -->
    <record id="view_initial_stock_wizard_form" model="ir.ui.view">
        <field name="name">stockex.initial.stock.wizard.form</field>
        <field name="model">stockex.initial.stock.wizard</field>
        <field name="arch" type="xml">
            <form string="Assistant Stock Initial">
                <field name="state" invisible="1"/>
                <field name="progress" invisible="1"/>
                
                <!-- Barre de progression -->
                <div class="alert alert-info py-2 mb-2" role="status" invisible="progress == 0.0">
                    <strong class="me-2">ðŸ”„ <field name="progress_message" readonly="1" nolabel="1"/></strong>
                    <span class="text-muted">Progression: <field name="progress" widget="percentage" nolabel="1"/></span>
                </div>
                
                <!-- Ã‰tape 1 : Import -->
                <group invisible="state != 'step1'">
                    <group>
                        <field name="name"/>
                        <field name="date"/>
                        <field name="location_id" options="{'no_create': True}"/>
                        <label for="location_id" string="" invisible="1"/>

                    </group>
                    <group>
                        <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
                        <field name="create_products"/>
                        <field name="create_categories"/>
                        <field name="create_warehouses"/>
                    </group>
                </group>
                
                <group invisible="state != 'step1'">
                    <group string="âš ï¸ Options AvancÃ©es (DANGER)">
                        <field name="force_reset" 
                               widget="boolean_toggle"
                               class="text-danger"/>
                        
                        <field name="incremental_update" 
                               widget="boolean_toggle"
                               class="text-success"/>
                    </group>
                    <group string="Import Excel (Requis)">
                        <field name="filename" invisible="1"/>
                        <field name="import_file" filename="filename"/>
                    </group>
                </group>
                

                

                
                <!-- Ã‰tape 2 : PrÃ©visualisation -->
                <group invisible="state != 'step2'">
                    <field name="preview_summary" nolabel="1" widget="html"/>
                </group>
                
                <footer>
                    <div class="d-flex justify-content-between flex-wrap gap-2">
                        <button string="Annuler" class="btn-secondary" special="cancel"/>
                        <div>
                            <button name="action_preview" type="object" string="ðŸ” PrÃ©visualiser" class="btn-primary me-2" 
                                    invisible="state != 'step1' or not import_file"/>
                            <button name="action_create_initial_stock" type="object" string="âœ… CrÃ©er Stock Initial" class="btn-success" 
                                    invisible="state != 'step1' or not import_file" confirm="Confirmez-vous la crÃ©ation du stock initial ?"/>
                            <button name="action_back" type="object" string="â† Retour" class="btn-secondary ms-2" 
                                    invisible="state != 'step2'"/>
                            <button name="action_create_initial_stock" type="object" string="âœ… Confirmer l'import" class="btn-primary ms-2" 
                                    invisible="state != 'step2'" confirm="Confirmez-vous l'import du stock initial ?"/>
                        </div>
                    </div>
                </footer>
            </form>
        </field>
    </record>
    
    <!-- Action pour l'Assistant Stock Initial -->
    <record id="action_initial_stock_wizard" model="ir.actions.act_window">
        <field name="name">Stock Initial</field>
        <field name="res_model">stockex.initial.stock.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
        
</odoo>
