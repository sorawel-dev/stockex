<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Vue formulaire du wizard de choix de m√©thode -->
    <record id="view_import_method_wizard_form" model="ir.ui.view">
        <field name="name">stockex.import.method.wizard.form</field>
        <field name="model">stockex.import.method.wizard</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div class="alert alert-info" role="alert">
                        <h4>üì¶ Acquisition des Donn√©es d'Inventaire</h4>
                        <p>Choisissez la m√©thode que vous souhaitez utiliser pour importer vos donn√©es d'inventaire.</p>
                    </div>
                    
                    <group>
                        <group>
                            <field name="name" placeholder="Ex: Inventaire Mensuel"/>
                            <field name="date"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                        </group>
                        <group>
                            <field name="kobo_config_exists" invisible="1"/>
                            <field name="kobo_submissions_available" invisible="1"/>
                        </group>
                    </group>
                    
                    <group string="üéØ M√©thode d'Import">
                        <field name="import_method" widget="radio"/>
                    </group>
                    
                    <notebook>
                        <page string="üìä Excel/CSV" name="excel_info" invisible="import_method != 'excel'">
                            <div class="alert alert-success">
                                <h5>‚úÖ Import depuis Fichier Excel ou CSV</h5>
                                <ul>
                                    <li><strong>Avantages</strong>:
                                        <ul>
                                            <li>Fichiers Excel (.xlsx) ou CSV</li>
                                            <li>Imports de masse (plusieurs milliers de lignes)</li>
                                            <li>Structure flexible avec colonnes personnalis√©es</li>
                                            <li>Cr√©ation automatique des produits/entrep√¥ts/cat√©gories</li>
                                        </ul>
                                    </li>
                                    <li><strong>Utilisation</strong>: Import bureau, consolidation de donn√©es</li>
                                </ul>
                            </div>
                        </page>
                        
                        <page string="üì± Kobo Collect" name="kobo_info" invisible="import_method != 'kobo'">
                            <div class="alert alert-warning" role="status" invisible="kobo_config_exists">
                                <h5>‚ö†Ô∏è Configuration Requise</h5>
                                <p>
                                    Kobo Collect n'est pas encore configur√©. 
                                    <button name="action_configure_kobo" 
                                            string="Configurer Maintenant" 
                                            type="object" 
                                            class="btn-link"/>
                                </p>
                            </div>
                            
                            <div class="alert alert-success" invisible="not kobo_config_exists">
                                <h5>‚úÖ Import depuis Kobo Collect</h5>
                                <ul>
                                    <li><strong>Avantages</strong>:
                                        <ul>
                                            <li>Collecte de donn√©es sur le terrain (mobile/tablette)</li>
                                            <li>Mode hors ligne support√©</li>
                                            <li>Synchronisation automatique</li>
                                            <li>G√©olocalisation GPS automatique</li>
                                            <li>Validation des donn√©es en temps r√©el</li>
                                        </ul>
                                    </li>
                                    <li><strong>Utilisation</strong>: Inventaires terrain, comptages physiques</li>
                                    <li><strong>Soumissions disponibles</strong>: <field name="kobo_submissions_available" nolabel="1"/> nouvelle(s)</li>
                                </ul>
                            </div>
                        </page>
                        
                        <page string="üìä Statistiques" name="stats">
                            <group>
                                <group string="Imports Pr√©c√©dents">
                                    <field name="excel_import_count" string="Imports Excel/CSV"/>
                                    <field name="kobo_import_count" string="Imports Kobo"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                
                <footer>
                    <button string="‚û°Ô∏è Continuer" 
                            name="action_continue" 
                            type="object" 
                            class="btn-primary"/>
                    <button string="Annuler" special="cancel" class="btn-secondary"/>
                </footer>
            </form>
        </field>
    </record>
    
    <!-- Action pour lancer le wizard de choix -->
    <record id="action_import_method_wizard" model="ir.actions.act_window">
        <field name="name">Nouvel Inventaire</field>
        <field name="res_model">stockex.import.method.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
    
</odoo>
